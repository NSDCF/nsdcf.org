<!doctype html>
<html class="no-js" lang="{{ .Site.LanguageCode }}">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ block "title" . }}{{ .Title }} &middot; {{ .Site.Title }}{{ end }}</title>
    {{ .Hugo.Generator }}
    {{ with .Description }}
      <meta name="description" content="{{ . }}">
    {{ end }}
    {{ $default_noindex_kinds := slice "section" "taxonomy" "taxonomyTerm" }}
    {{ $noindex_kinds := .Site.Params.noindex_kinds | default $default_noindex_kinds }}
    {{ $is_noindex_true := and (isset .Params "noindex") .Params.noindex }}
    {{ if or (in $noindex_kinds .Kind) ($is_noindex_true) }}
      <meta name="robots" content="noindex">
    {{ end }}
    {{ partial "meta/name-author" . }}
    {{ template "_internal/opengraph.html" . }}
    {{ template "_internal/twitter_cards.html" . }}
    {{ partial "meta/ogimage" . }}
    {{ if .IsHome }} {{ partial "site-verification" . }} {{ end }}
    {{ if .RSSLink }}
      <link href="{{ .RSSLink }}" rel="alternate" type="application/rss+xml" title="{{ .Site.Title }}" />
    {{ end }}
    <link rel="canonical" href="{{ .Permalink }}">
    {{ if (isset .Params "prev") }}
      <link rel="prev" href="{{ .Params.prev }}">
    {{ end }}
    {{ if (isset .Params "next") }}
      <link rel="next" href="{{ .Params.next }}">
    {{ end }}
    {{ partial "head/favicons" . }}
    <link rel="manifest" href="site.webmanifest">
    <link rel="stylesheet" href="css/main.css">
    {{ block "style" .}} {{end}}
    <!-- http://regexr.com/3f9d1 -->
    {{ $lazylist := findRE "class=\".*?\\blazyload\\b.*?\"|class=lazyload\b" .Content }}
    {{ if ge (len $lazylist) 1 }}
      <script async src="/js/lazysizes.min.js"></script>
    {{ end }}
  </head>

<body>
  {{ partial "header/site-browser-upgrade" . }}
  {{ block "nav" . }}{{ partial "header/site-nav" . }}{{ end }}
  {{ block "header" . }}{{ end }}

  <main>{{ block "main" . }}{{ end }}</main>
  <footer>{{ block "footer" . }}{{ end }}</footer>

  {{ partial "footer/site-scripts" . }}
</body>
</html>
