<!doctype html>
<html class="no-js" lang="{{ .Site.LanguageCode }}">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>{{ block "title" . }}{{ .Title }} &middot; {{ .Site.Title }}{{ end }}</title>
    {{ .Hugo.Generator }}
    {{ with .Description }}
      <meta name="description" content="{{ . }}">
    {{ end }}
    {{ partial "head/name-author" . }}
    {{ template "_internal/opengraph.html" . }}
    {{ template "_internal/twitter_cards.html" . }}
    {{ partial "head/ogimage" . }}
    {{ if .IsHome }} {{ partial "head/site-verification" . }} {{ end }}
    {{ if .RSSLink }}
      <link href="{{ .RSSLink }}" rel="alternate" type="application/rss+xml" title="{{ .Site.Title }}" />
    {{ end }}
    <link rel="canonical" href="{{ .Permalink }}">
    {{ if (isset .Params "prev") }}
      <link rel="prev" href="{{ .Params.prev }}">
    {{ end }}
    {{ if (isset .Params "next") }}
      <link rel="next" href="{{ .Params.next }}">
    {{ end }}
    {{ partial "head/favicons" . }}
    <link rel="manifest" href="site.webmanifest">
    <link rel="stylesheet" href="css/main.css">
    {{ block "style" .}} {{end}}
    <!-- http://regexr.com/3f9d1 -->
    {{ $lazylist := findRE "class=\".*?\\blazyload\\b.*?\"|class=lazyload\b" .Content }}
    {{ if ge (len $lazylist) 1 }}
      <script async src="/js/lazysizes.min.js"></script>
    {{ end }}
  </head>

  <body{{ with .Type }} class="{{ . }}" {{ end }}>
    {{ partial "header/site-browser-upgrade" . }}
    {{ block "nav" . }}{{ partial "header/site-nav" . }}{{ end }}
    {{ block "header" . }}{{ end }}

    <main class="main" id="main">{{ block "main" . }}{{ end }}</main>

    {{ block "footer" . }}{{ partial "footer/site-footer" . }}{{ end }}
    {{ partial "footer/site-scripts" . }}
  </body>
</html>
