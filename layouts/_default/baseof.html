<!doctype html>
<html class="html--no-js" lang="{{ .Site.LanguageCode }}">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>{{ block "title" . }}{{ .Params.Title }} &middot; {{ .Site.Params.title_abbrev }}{{ end }}</title>
    {{ hugo.Generator }}
    {{ with .Description }}
      <meta name="description" content="{{ . }}">
    {{ end }}
    {{ partial "head/name-author" . }}
    {{ template "_internal/opengraph.html" . }}
    {{ template "_internal/twitter_cards.html" . }}
    {{ partial "head/ogimage" . }}
    {{ if .IsHome }} {{ partial "head/site-verification" . }} {{ end }}
    {{ range .AlternativeOutputFormats -}}
      {{ printf `<link rel="%s" type="%s" href="%s" title="%s" />` .Rel .MediaType.Type .Permalink $.Site.Title | safeHTML }}
    {{ end -}}

    <link rel="canonical" href="{{ .Permalink }}">
    {{ if (isset .Params "prev") }}
      <link rel="prev" href="{{ .Params.prev }}">
    {{ end }}
    {{ if (isset .Params "next") }}
      <link rel="next" href="{{ .Params.next }}">
    {{ end }}
    {{ partial "head/favicons" . }}
    <link rel="manifest" href="site.webmanifest">

    {{ $sass := resources.Get "sass/main.sass" | toCSS | postCSS }}

    {{ if .Site.IsServer }}
      <link rel="stylesheet" href="{{ $sass.Permalink }}">
    {{ else }}
      {{ $css := $sass | minify | fingerprint }}
      <link rel="stylesheet" href="{{ $css.Permalink }}" integrity="{{ $css.Data.Integrity }}">
    {{ end }}

    {{ block "style" . }}{{ end }}

    <script>(function(H){H.className=H.className.replace(/\bhtml--no-js\b/,'html--js')})(document.documentElement)</script>
  </head>

  <body class="{{ with .Type }}body--{{ . }}{{ end }}
               {{ with .Kind }}body--{{ . }}{{ end }}
               {{ with .Layout }}body--{{ . }}{{ end }}
               {{ if .Params.layout_hero }}body--has-hero{{ end }}">

    {{ block "nav" . }}
      {{ partial "header/header" . }}
      {{ partial "header/nav" . }}
    {{ end }}

    <main class="main">
      {{ block "intro" . }}{{ end }}
      {{ block "main" . }}{{ end }}
    </main>

    {{ partial "footer/site-footer" . }}
    {{ partial "footer/site-scripts" . }}
  </body>
</html>
